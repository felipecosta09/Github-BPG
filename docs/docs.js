/*
 https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/
(function(){if("ontouchstart"in window){var d={},h,k;h=function(c,a){return 5<Math.abs(c[0]-a[0])||5<Math.abs(c[1]-a[1])};k=function(c,a){for(var e=c;e!==document.body;){if(!e||e.nodeName===a)return e;e=e.parentNode}return null};document.addEventListener("touchstart",function(c){this.startXY=[c.touches[0].clientX,c.touches[0].clientY];this.threshold=!1},!1);document.addEventListener("touchmove",function(c){if(this.threshold)return!1;this.threshold=h(this.startXY,[c.touches[0].clientX,c.touches[0].clientY])},
!1);document.addEventListener("touchend",function(c){if(!this.threshold&&!h(this.startXY,[c.changedTouches[0].clientX,c.changedTouches[0].clientY])){var a=c.changedTouches[0],e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null);e.simulated=!0;c.target.dispatchEvent(e)}},!1);document.addEventListener("click",function(c){var a=Date.now(),e=a-d.time,l=c.clientX,b=c.clientY,g=[Math.abs(d.x-l),Math.abs(d.y-b)],n=k(c.target,
"A")||c.target,p="A"===n.nodeName,p=window.navigator.standalone&&p&&c.target.getAttribute("href");d.time=a;d.x=l;d.y=b;if(!c.simulated&&(500>e||1500>e&&50>g[0]&&50>g[1])||p)if(c.preventDefault(),c.stopPropagation(),!p)return!1;p&&(window.location=n.getAttribute("href"));n&&n.classList&&(n.classList.add("energize-focus"),window.setTimeout(function(){n.classList.remove("energize-focus")},150))},!0)}})();
(function(){if(!this.require){var d={},h={},k=function(a,e){var l=c(e,a),b=c(l,"./index"),g;if(g=h[l]||h[b])return g;if(b=d[l]||d[l=b])return g={id:l,exports:{}},h[l]=g.exports,b(g.exports,function(b){return k(b,l.split("/").slice(0,-1).join("/"))},g),h[l]=g.exports;throw"module "+a+" not found";},c=function(a,e){var c=[],b,g;b=/^\.\.?(\/|$)/.test(e)?[a,e].join("/").split("/"):e.split("/");for(var n=0,d=b.length;n<d;n++)g=b[n],".."==g?c.pop():"."!=g&&""!=g&&c.push(g);return c.join("/")};this.require=
function(a){return k(a,"")};this.require.define=function(a){for(var e in a)d[e]=a[e]};this.require.modules=d;this.require.cache=h}return this.require}).call(this);
this.require.define({utils:function(d,h,k){(function(){d.getUrlParam=function(c){var a,e,d,b;b=window.location.search.substring(1).split("&");e=0;for(d=b.length;e<d;e++)if(a=b[e],a=a.split("="),a[0]===c)return a[1];return!1};d.getEmailFromParam=function(){var c;c=d.getUrlParam("email");if(!c)return!1;c=decodeURIComponent(c);return d.isValidEmail(c)?c:!1};d.getEmailFromCookie=function(){var c,a;(c=document.cookie.match("(^|;) ?ajs_user_id=([^;]*)(;|$)"))&&(a=c[2]);if(a&&(c=decodeURIComponent(a).replace(/['"]+/g,
""),d.isValidEmail(c)))return c};d.isValidCorporateEmail=function(c){if(!d.isValidEmail(c))return!1;c=c.split("@")[1];return/gmail|hotmail|yahoo|aol/.test(c)?!1:!0};d.isValidEmail=function(c){return/\S+@\S+\.\S+/.test(c)?!0:!1};d.isLocalStorageAllowed=function(){if("undefined"===typeof localStorage)return!1;try{return localStorage.setItem("__storage_test__","__storage_test__"),localStorage.removeItem("__storage_test__"),!0}catch(c){return!1}};d.track=function(c,a){null==a&&(a={});try{return"undefined"!==
typeof analytics&&null!==analytics?analytics.track(c,a):void 0}catch(e){return"undefined"!==typeof console&&null!==console?console.error(e):void 0}}}).call(this)}});
(function(){var d,h,k,c,a,e=function(b,g){return function(){return b.apply(g,arguments)}},l=[].indexOf||function(b){for(var g=0,a=this.length;g<a;g++)if(g in this&&this[g]===b)return g;return-1};d=jQuery;c=require("utils");a=c.track;k=c.isLocalStorageAllowed;h=function(){function b(){this.clickLanguage=e(this.clickLanguage,this);d(".lang-selector a").on("click",this.clickLanguage);d(window).on("onpopstate",function(b){return function(a){try{return b.activateLanguage(window.location.search.substr(1))}catch(e){}}}(this));
this.setupLanguages()}b.prototype.languages=["shell","ruby","javascript","python"];b.prototype.clickLanguage=function(b){b=d(b.currentTarget).data("language-name");this.pushURL(b);this.activateLanguage(b);a("viewed_docs",{z_viewed_docs_language:b});return!1};b.prototype.pushURL=function(b){var a;if(window.history)return(a=window.location.hash)&&(a=a.replace(/^#+/,"")),window.history.pushState({},"","?"+b+"#"+a),this.setDefaultLanguage(b)};b.prototype.activateLanguage=function(b){var a,e,c,f;if(b&&
!(0>l.call(this.languages,b))){d(".lang-selector a").removeClass("active");d(".lang-selector a[data-language-name='"+b+"']").addClass("active");f=this.languages;a=0;for(c=f.length;a<c;a++)e=f[a],d(".highlight."+e).closest("pre").hide(),d("blockquote."+e).hide();d(".highlight."+b).closest("pre").show();return d("blockquote."+b).show()}};b.prototype.getDefaultLanguage=function(){return k()?localStorage.getItem("language"):null};b.prototype.setDefaultLanguage=function(b){if(k())return localStorage.setItem("language",
b)};b.prototype.setupLanguages=function(){var b,a;b=this.getDefaultLanguage();return(a=location.search.substr(1))&&0<=l.call(this.languages,a)?(this.activateLanguage(a),this.setDefaultLanguage(a)):b&&0<=l.call(this.languages,b)?this.activateLanguage(b):this.activateLanguage(this.languages[0])};return b}();d(function(){return new h})}).call(this);
this.require.define({sister:function(d,h,k){k.exports=function(){var c={},a={};c.on=function(e,c){var b={name:e,handler:c};a[e]=a[e]||[];a[e].unshift(b);return b};c.off=function(e){var c=a[e.name].indexOf(e);-1!==c&&a[e.name].splice(c,1)};c.trigger=function(e,c){var b=a[e],g;if(b)for(g=b.length;g--;)b[g].handler(c)};return c}}});
this.require.define({contents:function(d,h,k){var c=h("sister"),a,e=window;a=function b(a){var e,d,m,f;if(!(this instanceof b))return new b(a);f=c();a=b.config(a);e=b.articles(a.articles,a.articleName,a.articleId);d=b.tree(e);m=b.list(d,a.link);b.bind(f,m,a);this.list=function(){return m};this.tree=function(){return d};this.eventEmitter=function(){return f}};a.bind=function(b,e,c){var d,m,f,h=e.querySelectorAll("li");b.on("resize",function(){d=a.windowHeight();m=a.indexOffset(c.articles);b.trigger("scroll")});
b.on("scroll",function(){var e,g;e=a.getIndexOfClosestValue(a.windowScrollY()+0.2*d,m);e!==f&&(g={},g.current={article:c.articles[e],guide:h[e]},void 0!==f&&(g.previous={article:c.articles[f],guide:h[f]}),b.trigger("change",g),f=e)})};a.windowHeight=function(){return e.innerHeight||e.document.documentElement.clientHeight};a.windowScrollY=function(){return e.pageYOffset||e.document.documentElement.scrollTop};a.config=function(b){var c=["articles","articleName","articleId","link"];b=b||{};a.forEach(Object.keys(b),
function(b){if(-1===c.indexOf(b))throw Error("Unknown configuration property.");});if(b.articles){if(!b.articles.length||!(b.articles[0]instanceof HTMLElement))throw Error('Option "articles" is not a collection of HTMLElement objects.');}else b.articles=e.document.querySelectorAll("h1, h2, h3, h4, h5, h6");if(b.articleName){if("function"!==typeof b.articleName)throw Error('Option "articleName" must be a function.');}else b.articleName=a.articleName;if(b.articleId){if("function"!==typeof b.articleId)throw Error('Option "articleId" must be a function.');
}else b.articleId=a.articleId;if(b.link){if("function"!==typeof b.link)throw Error('Option "link" must be a function.');}else b.link=a.link;return b};a.articleName=function(b){return b.innerText||b.textContent};a.articleId=function(b,a){return a.id||b};a.uniqueID=function(b,c){var d,p=1;b=a.formatId(b);if(c){for(d=b;-1!=c.indexOf(d);)d=b+"-"+p++;c.push(d)}else{if(!e.document)throw Error("No document context.");for(d=b;e.document.querySelector("#"+d);)d=b+"-"+p++}return d};a.formatId=function(b){return b.toLowerCase().replace(/[\u00e3\u00e0\u00e1\u00e4\u00e2]/g,
"a").replace(/[\u1ebd\u00e8\u00e9\u00eb\u00ea]/g,"e").replace(/[\u00ec\u00ed\u00ef\u00ee]/g,"i").replace(/[\u00f5\u00f2\u00f3\u00f6\u00f4]/g,"o").replace(/[\u00f9\u00fa\u00fc\u00fb]/g,"u").replace(/[\u00f1]/g,"n").replace(/[\u00e7]/g,"c").replace(/\s+/g,"-").replace(/[^a-z0-9\-_]+/g,"-").replace(/\-+/g,"-").replace(/^\-|\-$/g,"").replace(/^[^a-z]+/g,"")};a.articles=function(b,e,c){var d=[];e||(e=a.articleName);c||(c=a.articleId);a.forEach(b,function(b){var f={};f.level=a.level(b);f.name=e(b);f.id=
c(f.name,b);f.element=b;d.push(f)});return d};a.tree=function(b,e,c){var d={descendants:[],level:0},m=d.descendants,f;a.forEach(b,function(b){e&&(b.id=a.uniqueID(b.id,c));b.descendants=[];f?f.level===b.level?a.tree.findParentNode(f,d).descendants.push(b):b.level>f.level?f.descendants.push(b):a.tree.findParentNodeWithLevelLower(f,b.level,d).descendants.push(b):m.push(b);f=b});return m};a.tree.findParentNode=function(b,e){var c,d;if(-1!=e.descendants.indexOf(b))return e;for(c=e.descendants.length;c--;)if(d=
a.tree.findParentNode(b,e.descendants[c]))return d;throw Error("Invalid tree.");};a.tree.findParentNodeWithLevelLower=function(b,e,c){b=a.tree.findParentNode(b,c);return b.level<e?b:a.tree.findParentNodeWithLevelLower(b,e,c)};a.list=function(b,c){var d=e.document.createElement("ol");a.forEach(b,function(b){var m=e.document.createElement("li");c&&c(m,b);b.descendants.length&&m.appendChild(a.list(b.descendants,c));d.appendChild(m)});return d};a.link=function(b,a){var c=e.document.createElement("a"),
d=e.document.createElement("a");a.element.id=a.id;for(d.href="#"+a.id;a.element.childNodes.length;)d.appendChild(a.element.childNodes[0]);a.element.appendChild(d);c.appendChild(e.document.createTextNode(a.name));c.href="#"+a.id;b.insertBefore(c,b.firstChild)};a.level=function(b){var a=b.tagName.toLowerCase();return-1!=="h1 h2 h3 h4 h5 h6".split(" ").indexOf(a)?parseInt(a.slice(1),10):void 0!==b.dataset["gajus.contents.level"]?parseInt(b.dataset["gajus.contents.level"],10):jQuery&&void 0!==jQuery.data(b,
"gajus.contents.level")?jQuery.data(b,"gajus.contents.level"):1};a.indexOffset=function(b){for(var a=[],e=0,c=b.length,d;e<c;)d=b[e++],d=d.offsetTop,d=5*Math.round(d/5),a.push(d);return a};a.getIndexOfClosestValue=function(b,a){var e=0,c,d=0,f=a.length;if(!f)throw Error("Haystack must be not empty.");for(;d<f;){Math.abs(b-a[e])>Math.abs(a[d]-b)&&(e=d);if(e===c)break;c=e;d++}return e};a.throttle=function(b,a,e){var c,d;a=a||250;e=e||{};return function(){var f=+new Date,h=arguments;c&&f<c+a?(clearTimeout(d),
d=setTimeout(function(){c=f;b.apply(e,h)},a)):(c=f,b.apply(e,h))}};a.forEach=function(b,a){for(var e=0,c=b.length;e<c;)a(b[e],e),e++};k.exports=a}});
(function(){var d,h,k,c=function(a,e){return function(){return a.apply(e,arguments)}};h=require("contents");d=jQuery;k=function(){function a(){this.change=c(this.change,this);this.scroll=c(this.scroll,this);this.scrollToHash=c(this.scrollToHash,this);this.$toc=d(".toc");this.$articles=d(".content h1, .content h2, .content h3");this.$content=d(".article-content");this.renderIDs();this.scrollToHash();this.contents=h({articles:this.$articles,articleName:this.articleName});this.$toc.append(this.contents.list());
this.$guides=d("li",this.$toc);this.contents.eventEmitter().on("change",this.change);this.$content.scroll(h.throttle(this.scroll,100));this.scroll()}a.prototype.scrollToHash=function(){var a;if(a=location.hash.replace("#",""))if(a=d("#"+a).offset())return this.$content.scrollTop(a.top)};a.prototype.scroll=function(){var a,c;a=h.indexOffset(this.$articles);a=h.getIndexOfClosestValue(this.$content.scrollTop(),a);if(a!==this.lastArticleIndex)return c={},c.current={article:this.$articles[a],guide:this.$guides[a]},
null!=this.lastArticleIndex&&(c.previous={article:this.$articles[this.lastArticleIndex],guide:this.$guides[this.lastArticleIndex]}),this.contents.eventEmitter().trigger("change",c),this.lastArticleIndex=a};a.prototype.change=function(a){a.previous&&(d(a.previous.guide).removeClass("active expand"),d(a.previous.guide).parents("li").removeClass("expand"));d(a.current.guide).addClass("active expand");return d(a.current.guide).parents("li").addClass("expand")};a.prototype.articleName=function(a){return d(a).clone().css({textTransform:"none"}).text()};
a.prototype.renderIDs=function(){d(".content h2").each(function(){var a;a=[d(this).prevAll("h1:first").attr("id"),d(this).attr("id")];return d(this).attr({id:a.join("-")})});return d(".content h3").each(function(){var a;a=[d(this).prevAll("h2:first").attr("id"),d(this).attr("id")];return d(this).attr({id:a.join("-")})})};return a}();d(function(){return new k})}).call(this);(function(){}).call(this);
